CREATE TABLE CINEMA(
CINEMA_ID INT NOT NULL GENERATED ALWAYS AS IDENTITY CONSTRAINT CINEMA_PK PRIMARY KEY,
CINEMA_NAME VARCHAR(255) NOT NULL,
PHONE VARCHAR(10) NOT NULL,
INFO VARCHAR(500) NOT NULL,
X DOUBLE NOT NULL,
Y DOUBLE NOT NULL
);

CREATE TABLE MOVIE(
MOVIE_ID INT NOT NULL GENERATED ALWAYS AS IDENTITY CONSTRAINT MOVIE_PK PRIMARY KEY,
MOVIE_NAME VARCHAR(255) NOT NULL,
INFO VARCHAR(500) NOT NULL
);

CREATE TABLE ROOM(
ROOM_ID INT NOT NULL GENERATED ALWAYS AS IDENTITY CONSTRAINT ROOM_PK PRIMARY KEY,
ROOM_CINEMA_ID INT NOT NULL,
TOTAL_SEATS INT NOT NULL,
CONSTRAINT ROOM_FK FOREIGN KEY (ROOM_CINEMA_ID ) REFERENCES CINEMA (CINEMA_ID) ON DELETE CASCADE
);

CREATE TABLE VIEWMOVIE(
VIEWMOVIE_ID INT NOT NULL GENERATED ALWAYS AS IDENTITY CONSTRAINT VIEWMOVIE_PK PRIMARY KEY,
VIEWMOVIE_ROOM_ID INT NOT NULL,
VIEWMOVIE_MOVIE_ID INT NOT NULL,
TICKET_PRICE FLOAT NOT NULL,
START_TIME TIMESTAMP NOT NULL,
END_TIME TIMESTAMP NOT NULL,
CONSTRAINT VIEWMOVIE_FK1 FOREIGN KEY (VIEWMOVIE_MOVIE_ID ) REFERENCES MOVIE (MOVIE_ID) ON DELETE CASCADE,
CONSTRAINT VIEWMOVIE_FK2 FOREIGN KEY (VIEWMOVIE_ROOM_ID ) REFERENCES ROOM (ROOM_ID) ON DELETE CASCADE
);

CREATE TABLE TICKET(
TICKET_ID INT NOT NULL GENERATED ALWAYS AS IDENTITY CONSTRAINT TICKET_PK PRIMARY KEY,
TICKET_VIEWMOVIE_ID INT NOT NULL,
STATUS INT NOT NULL,
FIRST_NAME VARCHAR(255) NOT NULL,
LAST_NAME VARCHAR(255) NOT NULL,
CONSTRAINT TICKET_FK FOREIGN KEY (TICKET_VIEWMOVIE_ID ) REFERENCES VIEWMOVIE (VIEWMOVIE_ID) ON DELETE CASCADE
);


-- DROP TABLE TICKET;
-- DROP TABLE VIEWMOVIE;
-- DROP TABLE ROOM;
-- DROP TABLE MOVIE;
-- DROP TABLE CINEMA;

